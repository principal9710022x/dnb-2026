<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Simulateur DNB ‚Äì Bulletin officiel</title>

<style>
/* ================= BASE ================= */
body{
  font-family: Arial, Helvetica, sans-serif;
  background:#f4f6f8;
  padding:20px;
}
h1,h2{text-align:center}
table{
  border-collapse:collapse;
  margin:10px auto;
  background:#fff;
}
th,td{
  border:1px solid #000;
  padding:5px 7px;
  text-align:center;
}
th{background:#e6e6e6}
.range{width:120px}
.val{display:inline-block;width:40px;font-weight:bold}
.result{background:#e8f5e9;font-weight:bold}
.actions{text-align:center;margin:25px 0}

/* ===== Comment utiliser (WEB UNIQUEMENT) ===== */
.info-box{
  border:2px solid #000;
  padding:15px;
  margin:20px auto;
  background:#fafafa;
  max-width:900px;
}

/* ================= PIED DE PAGE ================= */
footer{
  text-align:center;
  font-size:13px;
  font-weight:bold;
  color:#333;
  margin-top:35px;
}

/* ================= RESPONSIVE ================= */
@media(max-width:800px){
  table{font-size:14px}
  .range{width:100px}
}

/* ================= IMPRESSION / PDF ================= */
@media print{
  body{
    background:#fff;
    padding:8mm;
    font-size:10.5pt;
  }

  h1{font-size:16pt;margin-bottom:8px;}
  h2{
    font-size:12pt;
    margin-top:12px;
    border-bottom:2px solid #000;
    padding-bottom:3px;
  }

  table{width:100%;margin:8px 0;}

  input[type=range],
  button,
  .actions,
  .info-box{
    display:none !important;
  }

  .val{display:inline;font-weight:normal;}

  footer{
    position:fixed;
    bottom:10mm;
    left:0;
    right:0;
    font-size:10.5pt;
  }

  /* ===== FILIGRANE ===== */
  body::before{
    content:"SIMULATION";
    position:fixed;
    top:-50%;
    left:-50%;
    width:200%;
    height:200%;
    transform:rotate(-30deg);
    font-size:60pt;
    font-weight:bold;
    color:rgba(0,0,0,0.06);
    z-index:-1;
    pointer-events:none;
    white-space:nowrap;
    display:grid;
    place-items:center;
    background-image:
      repeating-linear-gradient(
        45deg,
        rgba(0,0,0,0.06) 0,
        rgba(0,0,0,0.06) 2px,
        transparent 2px,
        transparent 200px
      );
  }

  /* ===== PAGE 2 : CR√âDITS ===== */
  .credits-page{
    display:block;
    page-break-before:always;
    border:2px solid #000;
    padding:20px;
    margin-top:30px;
  }
  .credits-page h2{
    text-align:center;
    text-transform:uppercase;
  }
  .cc-logo{
    text-align:center;
    margin:15px 0;
    font-size:12pt;
  }
}

/* ================= FORMAT PAGE ================= */
@page{
  size:A4 portrait;
  margin:15mm;
}

/* ===== CR√âDITS CACH√âS √Ä L'√âCRAN ===== */
.credits-page{
  display:none;
}
</style>
</head>

<body>

<h1>üìò Bulletin de simulation ‚Äì Dipl√¥me National du Brevet</h1>

<h2>üìö Contr√¥le continu ‚Äì 3 trimestres</h2>

<table>
<tr>
  <th rowspan="2">Mati√®re</th>
  <th colspan="3">Trimestres</th>
  <th rowspan="2">Moyenne annuelle</th>
</tr>
<tr><th>T1</th><th>T2</th><th>T3</th></tr>
<tbody id="cc"></tbody>
<tr>
  <th colspan="4">Contr√¥le continu ‚Äì base</th>
  <th id="cc_base" class="result"></th>
</tr>
</table>

<h2>üéì √âpreuve facultative</h2>

<table>
<tr><th>Note / 20</th><th>Bonus appliqu√©</th></tr>
<tr>
<td>
<input type="range" min="0" max="20" step="0.1" value="0" id="fac" class="range">
<span class="val" id="vfac">0</span>
</td>
<td id="bonus" class="result">0</td>
</tr>
</table>

<h2>üìù √âpreuves terminales</h2>

<table>
<tr><th>√âpreuve</th><th>Note / 20</th></tr>
<tbody id="epreuves"></tbody>
<tr>
<th>Moyenne des √©preuves</th>
<th id="moyE" class="result"></th>
</tr>
</table>

<h2>üèÜ R√©sultat final</h2>

<table>
<tr><th>Moyenne finale DNB</th><th id="final" class="result"></th></tr>
<tr><th>D√©cision</th><th id="decision" class="result"></th></tr>
<tr><th>Mention</th><th id="mention" class="result"></th></tr>
</table>

<div class="actions">
<button onclick="window.print()">üìÑ Exporter en PDF</button>
</div>

<!-- ===== WEB UNIQUEMENT ===== -->
<div class="info-box">
<p><strong>Comment utiliser le simulateur ?</strong></p>
<p>
Renseigne les notes trimestrielles et les √©preuves finales
pour estimer ta moyenne et ta mention au DNB.
</p>
<ul>
<li>Contr√¥le continu : 40 %</li>
<li>√âpreuves terminales : 60 %</li>
<li>Bonus facultatif possible</li>
</ul>
<p>
Ce simulateur fournit une estimation indicative,
sans se substituer aux r√©sultats officiels.
</p>
</div>

<footer id="footer"></footer>

<!-- ===== PDF PAGE 2 UNIQUEMENT ===== -->
<section class="credits-page">
<h2>Cr√©dits et mentions l√©gales</h2>

<p><strong>Simulateur du Dipl√¥me National du Brevet</strong></p>

<p>
Conception et r√©alisation : <strong>Alexis PIMPIT</strong><br>
Outil p√©dagogique destin√© √† l‚Äôaccompagnement des √©l√®ves de 3·µâ.
</p>

<p>
Calculs conformes aux textes officiels
du Minist√®re de l‚Äô√âducation nationale
(Bulletin officiel et √âduscol).
</p>

<div class="cc-logo">‚ìí‚ìí BY-NC-ND 4.0</div>

<p>
Licence Creative Commons Attribution ‚Äì Pas d‚ÄôUtilisation Commerciale ‚Äì
Pas de Modification 4.0 International.
</p>

<p>
La diffusion est autoris√©e dans un cadre p√©dagogique non commercial,
sous r√©serve de citer l‚Äôauteur.
Toute modification ou exploitation commerciale est interdite.
</p>
</section>

<script>
const matieres=[
 "Fran√ßais","Math√©matiques","Histoire-G√©ographie",
 "Langue vivante","Sciences","Technologie",
 "Arts plastiques","√âducation musicale","EPS"
];
const epreuves=[
 "Fran√ßais","Math√©matiques","Histoire-G√©ographie",
 "Sciences","Oral"
];

const cc=document.getElementById("cc");
matieres.forEach((m,i)=>{
 cc.insertAdjacentHTML("beforeend",`
 <tr>
  <td>${m}</td>
  <td><input type="range" min="0" max="20" step="0.1" value="10" class="range t${i}">
      <span class="val">10</span></td>
  <td><input type="range" min="0" max="20" step="0.1" value="10" class="range t${i}">
      <span class="val">10</span></td>
  <td><input type="range" min="0" max="20" step="0.1" value="10" class="range t${i}">
      <span class="val">10</span></td>
  <td id="m${i}" class="result"></td>
 </tr>`);
});

const ep=document.getElementById("epreuves");
epreuves.forEach((e,i)=>{
 ep.insertAdjacentHTML("beforeend",`
 <tr>
  <td>${e}</td>
  <td>
    <input type="range" min="0" max="20" step="0.1" value="10" id="e${i}" class="range">
    <span class="val" id="ve${i}">10</span>
  </td>
 </tr>`);
});

function calc(){
 let totalCC=0;
 matieres.forEach((_,i)=>{
   let sliders=[...document.querySelectorAll(".t"+i)];
   sliders.forEach(s=>s.nextElementSibling.textContent=Number(s.value).toFixed(1));
   let moy=sliders.reduce((a,s)=>a+Number(s.value),0)/3;
   document.getElementById("m"+i).textContent=moy.toFixed(2);
   totalCC+=moy;
 });
 let CC_base=totalCC/matieres.length;
 document.getElementById("cc_base").textContent=CC_base.toFixed(3);

 let fac=Number(document.getElementById("fac").value);
 document.getElementById("vfac").textContent=fac.toFixed(1);
 let bonus=Math.max(0,fac-10)/20;
 document.getElementById("bonus").textContent=bonus.toFixed(3);
 let CC_final=CC_base+bonus;

 let totalE=0;
 epreuves.forEach((_,i)=>{
   let v=Number(document.getElementById("e"+i).value);
   document.getElementById("ve"+i).textContent=v.toFixed(1);
   totalE+=v;
 });
 let moyE=totalE/epreuves.length;
 document.getElementById("moyE").textContent=moyE.toFixed(3);

 let final=(CC_final*0.4)+(moyE*0.6);
 document.getElementById("final").textContent=final.toFixed(3);
 document.getElementById("decision").textContent=final>=10?"ADMIS":"NON ADMIS";

 let mention="‚Äî";
 if(final>=18) mention="Tr√®s Bien avec les f√©licitations du jury";
 else if(final>=16) mention="Tr√®s Bien";
 else if(final>=14) mention="Bien";
 else if(final>=12) mention="Assez Bien";
 else if(final>=10) mention="Admis (sans mention)";
 document.getElementById("mention").textContent=mention;

 const d=new Date();
 const y=d.getFullYear();
 const m=d.getMonth();
 const annee=(m>=8)?`${y}-${y+1}`:`${y-1}-${y}`;
 document.getElementById("footer").textContent=
   `Simulateur propos√© par Alexis PIMPIT | ${annee}`;
}

document.querySelectorAll("input[type=range]")
 .forEach(r=>r.addEventListener("input",calc));
calc();
</script>

</body>
</html>
